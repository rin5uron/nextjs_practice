### **Issue #7 実装ガイド: Vercelデプロイ連携の実装**

**完了日: ____年__月__日**

#### **目的**
このIssueでは、作成されたPRをVercelに自動でデプロイし、プレビューURLを取得・共有する機能を実装します。

#### **前提条件**
*   マイルストーン3（Issue #6）が完了し、自動でPull Requestが作成できる状態であること。
*   Vercelアカウントと、GitHubリポジリがVercelに連携済みであること。

---

#### **ステップ1: Vercelデプロイのトリガー確認**

*   GitHubとVercelの連携が正しく設定されていれば、PRが作成されると自動的にVercelでプレビューデプロイが開始されるはずです。
*   Vercelのダッシュボードで、PR作成後にデプロイがトリガーされているか確認します。

#### **ステップ2: プレビューURLの取得**

*   Vercelのデプロイが完了した後、そのプレビューURLをワークフロー内で取得する方法を実装します。
*   Vercel CLI (`vercel deploy --prebuilt --prod --token=$VERCEL_TOKEN`) や、VercelのAPI (`https://api.vercel.com/v6/deployments`) を使用して、デプロイ情報を取得し、プレビューURLを抽出します。
*   `VERCEL_TOKEN` はVercelのPersonal Access TokenをGitHub Secretsに設定する必要があります。

#### **ステップ3: プレビューURLのコメント投稿**

*   取得したプレビューURLを、関連するPRまたはIssueにコメントとして自動投稿する機能を実装します。
*   `peter-evans/create-or-update-comment`アクションを再度使用し、`body`にプレビューURLを含めます。

#### **ステップ4: ワークフロー権限の追加**

*   `gemini.yml` ファイルに、Vercelのデプロイ情報取得に必要な権限を追加します（もし必要であれば）。

#### **ステップ5: 動作確認**

実装が完了したら、以下の手順で動作を確認します。

1.  **変更をコミット＆プッシュ:**
    修正した `scripts/gemini-reply.js` と `gemini.yml` をリポジトリにコミットし、GitHubにプッシュします。

2.  **ワークフローをトリガー:**
    Geminiにコード変更を指示するコメントを投稿し、PRが作成されることを確認します。

3.  **GitHub ActionsのログとPRコメントを確認:**
    *   ワークフローのログを確認し、エラーがないか、プレビューURLが正しく取得されたかを確認します。
    *   作成されたPRのコメント欄に、VercelのプレビューURLが投稿されていることを確認します。

#### **期待される結果**
*   ワークフローが正常に完了し、緑色のチェックマークが表示される。
*   PR作成後、VercelのプレビューURLが自動的にコメントとして投稿される。
