### **Issue #5 実装ガイド: コード生成とコマンド実行の実装**

**完了日: ____年__月__日**

#### **目的**
このIssueでは、Geminiの指示に基づいて、リポジトリ内のファイルを直接変更したり、`pnpm` などのシェルコマンドを実行したりする機能を実装します。

#### **前提条件**
*   マイルストーン1（Issue #4）が完了し、Gemini APIからの応答をIssueにコメントできる状態であること。

---

#### **ステップ1: Gemini応答の解析ロジックの実装**

*   `scripts/gemini-reply.js` を修正し、Geminiからの応答（テキスト）を解析するロジックを追加します。
*   例えば、応答が特定のフォーマット（例: `FILE_CHANGE: path/to/file.txt: content` や `RUN_COMMAND: pnpm install`）に従っている場合、それを識別できるようにします。

#### **ステップ2: ファイル書き込み機能の実装**

*   解析結果に基づいて、指定されたパスにファイルを書き込む、または既存のファイルを上書きする機能を `scripts/gemini-reply.js` に追加します。
*   Node.jsの `fs` モジュール（`fs.writeFileSync`など）を使用します。

#### **ステップ3: シェルコマンド実行機能の実装**

*   解析結果に基づいて、指定されたシェルコマンド（例: `pnpm install`, `pnpm build`）を安全に実行する機能を `scripts/gemini-reply.js` に追加します。
*   Node.jsの `child_process` モジュール（`child_process.execSync`など）を使用します。

#### **ステップ4: ワークフロー権限の追加**

*   `gemini.yml` ファイルに、ファイル書き込みやコマンド実行に必要な権限を追加します。
    *   `permissions: contents: write`

#### **ステップ5: 動作確認**

実装が完了したら、以下の手順で動作を確認します。

1.  **変更をコミット＆プッシュ:**
    修正した `scripts/gemini-reply.js` と `gemini.yml` をリポジトリにコミットし、GitHubにプッシュします。

2.  **ワークフローをトリガー:**
    任意のIssue（またはPR）を開き、Geminiにファイル変更やコマンド実行を指示するコメント（例: `@gemini FILE_CHANGE: test.txt: hello`）を投稿します。

3.  **GitHub Actionsのログとリポジトリを確認:**
    *   リポジトリの「Actions」タブでワークフローのログを確認し、エラーがないか、意図したコマンドが実行されたかを確認します。
    *   リポジトリのファイルが正しく変更されたかを確認します。

#### **期待される結果**
*   ワークフローが正常に完了し、緑色のチェックマークが表示される。
*   Geminiの指示通りにファイルが変更される、またはコマンドが実行される。
